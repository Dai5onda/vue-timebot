(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6ed4"],{"3CMm":function(t,e,a){"use strict";var i=a("f4ij");a.n(i).a},"6bP5":function(t,e,a){"use strict";var i=a("Qq1u");a.n(i).a},G2KY:function(t,e,a){"use strict";a.d(e,"a",function(){return l}),a.d(e,"f",function(){return u}),a.d(e,"b",function(){return h}),a.d(e,"d",function(){return p}),a.d(e,"e",function(){return f}),a.d(e,"c",function(){return g});var i=a("4d7F"),s=a.n(i),n=(a("aHnO"),a("P2sY")),r=a.n(n),o=a("QbLZ"),d=a.n(o),c=a("L2JU"),l={data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"Last week",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"Last month",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"Last 3 months",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},isAnswered:!0}},methods:{formatDate:function(t){if(t){var e=t.getDate();e<10&&(e="0"+e);var a=t.getMonth()+1;a<10&&(a="0"+a);var i=t.getFullYear();return i<10&&(i="0"+i),i+"-"+a+"-"+e}}},computed:d()({},Object(c.b)(["rangeDate"]),{date:{get:function(){return this.rangeDate},set:function(t){this.$store.dispatch("setRangeDate",t)}}}),created:function(){},mounted:function(){if(this.date){var t=new Date("2018-08-18"),e=new Date("2018-08-12");e.setTime(e.getTime()-6048e5),this.$store.dispatch("setRangeDate",[this.formatDate(e),this.formatDate(t)])}}},u={data:function(){var t=function(t,e,a){e?a():a(new Error)},e=function(t,e,a){e?a():a(new Error)};return{rules:{type:[{required:!0,message:"type is required",trigger:"change"}],date:[{validator:e,type:"date",required:!0,message:"Date is required",trigger:"blur"}],time:[{validator:e,type:"datetime",required:!0,message:"Time is required",trigger:"blur"}],title:[{required:!0,message:"title is required",trigger:"blur"}],id:[{validator:t,required:!0,message:"User is required",trigger:"change"}],project:[{validator:function(t,e,a){e?a():a(new Error)},required:!0,message:"Project is required",trigger:"change"}],name:[{validator:t,required:!0,message:"Name of project is requires",trigger:"change"}],team:[{required:!0,message:"Team is requires",trigger:"change"}]}}}},h={data:function(){return{dialogStatus:"",dialogFormVisible:!1,dialogViewVisible:!1,dialogFormLoading:!1,textMap:{update:"Edit",create:"Create",view:"View"},temp:{id:void 0,type:"",date:"",attributes:{"is-active":!1},relationships:{team:{data:{}},user:{data:{}},project:{data:{}}}}}},methods:{handleUpdate:function(t){var e=this;this.temp=r()({},t),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()})},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},handleView:function(t){this.temp=r()({},t),this.dialogStatus="view",this.dialogViewVisible=!0},resetTemp:function(){this.temp={id:void 0,type:"",date:"",attributes:{"is-active":!1},relationships:{team:{data:{}},user:{data:{}},project:{data:{}}}}}}},p={data:function(){return{}},methods:{handleSizeChange:function(t){var e=this;this.$store.dispatch("actionEntityTable/setPagination",{type:"limit",value:t}).then(function(){e.getList()})},handleCurrentChange:function(t){var e=this;this.$store.dispatch("actionEntityTable/setPagination",{type:"page",value:t}).then(function(){e.getList()})}}},f={beforeDestroy:function(){this.$store.dispatch("actionEntityTable/clearStore")},methods:{getList:function(){var t=this;return new s.a(function(e,a){t.$store.dispatch("actionEntityTable/setLoader",!0),t.$store.dispatch("actionEntityTable/fetchList",t.type).then(function(){t.$store.dispatch("actionEntityTable/setLoader",!1),e()})})},removeEntity:function(t,e){var a=this;this.$confirm("This will permanently delete the entity. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){a.$store.dispatch("actionEntityTable/deleteEntity",{row:t,type:a.type}).then(function(){a.$message({message:"Project was deleted",type:"success"}),t.status=e})}).catch(function(){a.$message({type:"info",message:"Delete canceled"})})},createEntity:function(t){var e=this;return new s.a(function(a,i){e.$refs.dataForm.validate(function(i){i&&(e.dialogFormLoading=!0,e.$store.dispatch("actionEntityTable/createEntity",{row:t,type:e.type}).then(function(t){e.dialogFormVisible=!1,e.dialogFormLoading=!1,e.$notify({title:"Success",message:e.setMessageName(e.type)+" was created",type:"success",duration:2e3}),a()}).catch(function(){e.dialogFormVisible=!1,e.dialogFormLoading=!1}))})})},updateEntity:function(t){var e=this;this.$refs.dataForm.validate(function(a){a&&(e.dialogFormLoading=!0,e.$store.dispatch("actionEntityTable/updateEntity",{row:t,type:e.type}).then(function(){e.dialogFormVisible=!1,e.dialogFormLoading=!1,e.$notify({title:"Success",message:e.setMessageName(e.type)+" was updated",type:"success",duration:2e3})}).catch(function(t){console.log(t),e.dialogFormVisible=!1,e.dialogFormLoading=!1}))})},setMessageName:function(t){switch(t){case"projects":return"Project";case"time-entries":return"Time entry";case"users":return"User";case"teams":return"Team";case"holidays":return"Holiday";case"absences":return"Absence";case"admins":return"Admin"}},remoteGetProjects:function(t){var e=this;"string"!=typeof t&&(t=this.temp&&this.getIncluded(this.temp.relationships.project.data.id)||""),this.loading=!0,this.$store.dispatch("actionEntityTable/fetchEntityByName",{type:"projects",query:t}).then(function(){e.loading=!1})},remoteGetUsers:function(t){var e=this;"string"!=typeof t&&(t=this.temp&&this.getIncluded(this.temp.relationships.user.data.id)||""),this.loading=!0,this.$store.dispatch("actionEntityTable/fetchEntityByName",{type:"users",query:t}).then(function(){e.loading=!1})},filter:function(){var t=this;return new s.a(function(e,a){t.$store.dispatch("actionEntityTable/setLoader",!0),t.$store.dispatch("actionEntityTable/setFilter",t.entity).then(function(){t.$store.dispatch("actionEntityTable/fetchList",t.type).finally(function(){t.$store.dispatch("actionEntityTable/setLoader",!1),e()})})})}}},g={methods:{getIncluded:function(t){if(this.included(this.type)){var e=this.included(this.type).find(function(e){if(e.id===t)return e});if(e)return e.attributes.name}}}}},"MWG/":function(t,e,a){},Qq1u:function(t,e,a){},aHnO:function(t,e,a){t.exports={default:a("tbFO"),__esModule:!0}},f4ij:function(t,e,a){},itRl:function(t,e,a){"use strict";var i=a("jr1U"),s=a.n(i),n=a("rfXi"),r=a.n(n),o=a("Kw5r");function d(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=[];return r()(t).forEach(function(t){void 0===t._expanded&&o.default.set(t,"_expanded",e);var n=1;if(void 0!==i&&null!==i&&(n=i+1),o.default.set(t,"_level",n),a&&o.default.set(t,"parent",a),s.push(t),t.children&&t.children.length>0){var r=d(t.children,e,t,n);s=s.concat(r)}}),s}var c={name:"TreeTable",props:{data:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!1}},computed:{formatData:function(){var t=void 0;t=Array.isArray(this.data)?this.data:[this.data];var e=this.evalFunc||d,a=this.evalArgs?s()([t,this.expandAll],this.evalArgs):[t,this.expandAll];return e.apply(null,a)}},methods:{showRow:function(t){var e=!t.row.parent||t.row.parent._expanded&&t.row.parent._show;return t.row._show=e,e?"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;":"display:none;"},toggleExpanded:function(t){var e=t;e._expanded=!e._expanded},iconShow:function(t,e){return 0===t&&e.children&&e.children.length>0||0===t&&e.time_entries&&e.time_entries.length>0}}},l=(a("6bP5"),a("kLE5"),a("KHd+")),u=Object(l.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",t._b({attrs:{data:t.formatData,"row-style":t.showRow},on:{"row-click":t.toggleExpanded}},"el-table",t.$attrs,!1),[t._l(t.columns,function(e,i){return a("el-table-column",{key:e.value,attrs:{label:e.text,width:e.width},scopedSlots:t._u([{key:"default",fn:function(s){return[t._l(s.row._level,function(e){return 0===i?a("span",{key:e,staticClass:"ms-tree-space"}):t._e()}),t._v("\n      "+t._s(s.row[e.value])+"\n      "),t.iconShow(i,s.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(e){t.toggleExpanded(s.$index)}}},[s.row._expanded?a("i",{staticClass:"el-icon-arrow-up"}):a("i",{staticClass:"el-icon-arrow-down"})]):t._e()]}}])})}),t._v(" "),t._t("default")],2)},[],!1,null,"310c1a60",null);u.options.__file="index.vue";e.a=u.exports},jr1U:function(t,e,a){t.exports={default:a("wObO"),__esModule:!0}},kKwK:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var i=a("rfXi"),s=a.n(i),n=a("Kw5r");function r(t,e,a,i,o){var d=[],c=[];return s()(t).forEach(function(t){void 0===t._expanded&&n.default.set(t,"_expanded",e);var s=1;if(void 0!==i&&null!==i&&(s=i+1),n.default.set(t,"_level",s),a?(n.default.set(t,"parent",a),d[s]||(d[s]=0),n.default.set(t,"_marginLeft",d[s]+a._marginLeft),n.default.set(t,"_width",t[o]/a[o]*a._width),d[s]+=t._width):(d[t.id]=[],d[t.id][s]=0,n.default.set(t,"_marginLeft",0),n.default.set(t,"_width",1)),c.push(t),t.children&&t.children.length>0){var l=r(t.children,e,t,s,o);c=c.concat(l)}}),c}},kLE5:function(t,e,a){"use strict";var i=a("MWG/");a.n(i).a},lAbF:function(t,e,a){"use strict";a.r(e);var i=a("QbLZ"),s=a.n(i),n=a("L2JU"),r={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"600px"},labelSector:{type:String,default:""},innerSize:{type:String,default:""},color:{type:Array,default:function(){return[]}},title:{type:String,default:function(){return""}},plotOptions:{type:Object,default:function(){return{}}},chart:{type:Object,default:function(){return{}}},tooltip:{type:Object,default:function(){return{}}},payloadData:{type:Array,default:function(){return[]}},legendData:{type:Boolean,default:!1}},data:function(){return{legend:{padding:3,itemMarginTop:2,itemMarginBottom:2}}}},o=a("KHd+"),d=Object(o.a)(r,function(){var t=this,e=t.$createElement;return(t._self._c||e)("highcharts",{style:{height:t.height,width:t.width},attrs:{options:{title:{text:t.title},legend:t.legend,series:[{name:"Hours",innerSize:t.innerSize,data:t.payloadData}],tooltip:t.tooltip,plotOptions:t.plotOptions,chart:t.chart}}})},[],!1,null,null,null);d.options.__file="PieChart.vue";var c=d.exports,l={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"800px"},series:{type:Array,default:function(){return[]}},xAxisData:{type:Array,default:function(){return[]}}},data:function(){return{chart:{type:"bar",marginLeft:125,marginBottom:90},tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',shared:!0},legend:{layout:"vertical",align:"right",verticalAlign:"top",padding:3,itemMarginTop:5,itemMarginBottom:5},plotOptions:{series:{borderWidth:0,stacking:"normal"}}}}},u=Object(o.a)(l,function(){var t=this.$createElement;return(this._self._c||t)("highcharts",{style:{height:this.height},attrs:{options:{title:{text:"Projects"},series:this.series,legend:this.legend,tooltip:this.tooltip,plotOptions:this.plotOptions,chart:this.chart,xAxis:{categories:this.xAxisData}}}})},[],!1,null,null,null);u.options.__file="BarChart.vue";var h=u.exports,p=a("G2KY"),f=a("kKwK"),g=a("itRl"),m=a("K1uM"),v={name:"DashboardAdmin",components:{PieChart:c,BarChart:h,treeTable:g.a,highcharts:m.Chart},mixins:[p.a],data:function(){return{type:"dashboardChart",func:f.a,args:[null,null,"timeLine"],columns:[{text:"Date",value:"date"},{text:"Name",value:"name"},{text:"Reason",value:"reason"},{text:"Comment",value:"comment"}]}},computed:s()({},Object(n.b)(["chartData","tickets","staticData"])),mounted:function(){var t=this;this.isAnswered=!1,this.$store.dispatch("fetchChartByDate",{type:this.type,params:{date_from:this.date[0],date_to:this.date[1]}}).then(function(){t.isAnswered=!0})},methods:{setDate:function(){var t=this;this.isAnswered=!1,this.date?this.$store.dispatch("fetchChartByDate",{type:this.type,params:{date_from:this.date[0],date_to:this.date[1]}}).then(function(){t.isAnswered=!0}):this.$store.dispatch("fetchChartByDate",{type:this.type,params:{}}).then(function(){t.isAnswered=!0})}}},y=(a("3CMm"),Object(o.a)(v,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.isAnswered,expression:"!isAnswered"}],staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"datepicker-header-container"},[a("div",{staticClass:"timebot-header"},[t._v("Dashboard")]),a("div",{staticClass:"dashboard-statistics-datepicker"},[a("el-date-picker",{attrs:{disabled:!t.isAnswered,type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions,"start-placeholder":"Start date","end-placeholder":"End date",placeholder:"Please pick a date","prefix-icon":"date-calendar"},on:{change:t.setDate},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)]),a("div",[a("div",{staticClass:"dashboard-flex-container"},[a("div",{staticClass:"dashboard-flex-block"},[t.date?a("div",{staticClass:"dashboard-header-statistics"},[t._m(0),a("div",{staticClass:"dashboard-stat-padding"},[a("div",[t._v("Statistics for")]),a("span",[t._v(t._s(t.date[0])+" - "+t._s(t.date[1]))])])]):t._e()]),a("div",{staticClass:"dashboard-flex-block"},[a("div",{staticClass:"dashboard-header-statistics"},[t._m(1),a("div",{staticClass:"dashboard-stat-padding"},[a("div",[t._v("Hours to work:")]),a("span",[t._v(t._s(t.staticData("hours_to_work")))])])])]),a("div",{staticClass:"dashboard-flex-block"},[a("div",{staticClass:"dashboard-header-statistics"},[t._m(2),a("div",{staticClass:"dashboard-stat-padding"},[a("div",[t._v("Hours worked:")]),a("span",[t._v(t._s(Math.round(t.staticData("hours_worked"))))])])])])]),a("div",{staticClass:"dashboard-flex--holiday-container"},[a("div",{staticClass:"dashboard-flex-block mw-32"},[t.staticData("holidays").length?a("div",{staticClass:"dashboard-header-statistics"},[t._m(3),a("div",{staticClass:"dashboard-stat-padding"},[a("div",[t._v("Holidays:")]),t._l(t.staticData("holidays"),function(e,i){return a("span",{key:i,staticClass:"mr-2"},[a("span",[t._v(t._s(e[0])+" ")]),a("span",[t._v(t._s(e[1]))])])})],2)]):t._e()])])]),a("div",{staticClass:"dashboard-graphics"},[a("el-col",{staticClass:"dashboard-graphics-margin",attrs:{xs:24,sm:24,lg:12}},[a("div",{staticClass:"highcharts-header"},[t._v("Projects")]),a("div",{staticClass:"chart-wrapper"},[a("PieChart",{attrs:{title:t.chartData("projects").title,innerSize:t.chartData("projects").innerSize,chart:{plotBackgroundColor:null,plotBorderWidth:0,plotShadow:!1,type:"pie"},plotOptions:{pie:{dataLabels:{enabled:!0,format:"<span><b>{point.name}</b>: {point.percentage:.1f}</span>",connectorColor:"silver"},showInLegend:!0,startAngle:0,endAngle:360,center:["50%","50%"],size:"70%"}},payloadData:t.chartData("projects").data,id:"project-chart"}})],1)]),a("el-col",{attrs:{xs:24,sm:24,lg:12}},[a("div",{staticClass:"highcharts-header"},[t._v("Users")]),a("div",{staticClass:"chart-wrapper"},[a("PieChart",{attrs:{title:t.chartData("departments").title,chart:{type:"variablepie"},payloadData:t.chartData("departments").data}})],1)])],1),t.staticData("series")?a("el-col",{staticClass:"dashboard-bt-graphics-margin",attrs:{xs:24,sm:24,lg:24}},[a("div",{staticClass:"highcharts-header"},[t._v("Projects")]),a("div",{staticClass:"chart-wrapper"},[a("BarChart",{attrs:{xAxisData:t.staticData("xAxisData"),series:t.staticData("series")}})],1)]):t._e(),t.staticData("absent").length?a("div",{staticClass:"dashboard-header-statistics"}):t._e(),a("el-col",{staticClass:"dashboard-graphics-margin",attrs:{xs:24,sm:24,lg:24}},[a("div",{staticClass:"highcharts-header"},[t._v("Absence")]),t.staticData("absent").length?a("tree-table",{attrs:{columns:t.columns,data:t.staticData("absent"),"eval-func":t.func,"eval-args":t.args,border:""}}):t._e()],1)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dashboard-header-image"},[e("img",{attrs:{src:"src/icons/svg/analysis.svg"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dashboard-header-image"},[e("img",{attrs:{src:"src/icons/svg/deadline.svg"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dashboard-header-image"},[e("img",{attrs:{src:"src/icons/svg/task.svg"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dashboard-header-image"},[e("img",{attrs:{src:"src/icons/svg/holiday.svg"}})])}],!1,null,"64ab63de",null));y.options.__file="index.vue";var b={name:"Dashboard",components:{adminDashboard:y.exports},data:function(){return{currentRole:"adminDashboard"}},computed:s()({},Object(n.b)(["roles"])),created:function(){}},_=Object(o.a)(b,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dashboard-container"},[e(this.currentRole,{tag:"component"})],1)},[],!1,null,null,null);_.options.__file="index.vue";e.default=_.exports},pGU1:function(t,e,a){var i=a("Y7ZC"),s=a("vwuL").f,n=a("5K7Z");i(i.S,"Reflect",{deleteProperty:function(t,e){var a=s(n(t),e);return!(a&&!a.configurable)&&delete t[e]}})},tbFO:function(t,e,a){a("pGU1"),t.exports=a("WEpk").Reflect.deleteProperty},wObO:function(t,e){t.exports=function(){return Function.call.apply(Array.prototype.concat,arguments)}}}]);